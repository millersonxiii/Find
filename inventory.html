<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Коллекция - Собери Политиков</title>
  <style>
    :root {
      --bg-primary: #0a0e17;
      --bg-secondary: #131a2a;
      --bg-card: #1a2235;
      --bg-modal: rgba(10, 14, 23, 0.98);
      --accent-gold: #ffd700;
      --accent-silver: #c0c0c0;
      --accent-bronze: #cd7f32;
      --text-primary: #ffffff;
      --text-secondary: #a0aec0;
      --text-muted: #718096;
      --border-color: rgba(255, 255, 255, 0.15);
      --shadow-dark: 0 8px 32px rgba(0, 0, 0, 0.6);
      --shadow-light: 0 4px 16px rgba(255, 255, 255, 0.1);
      --rarity-common: #84c78a;
      --rarity-rare: #84b8ff;
      --rarity-epic: #c89cff;
      --rarity-legend: #ffd37a;
      --rarity-mythic: #ff7a7a;
      --rarity-secret: #9ea0a6;
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      height: 100%;
      overflow: hidden;
      font-family: 'Inter', 'Segoe UI', system-ui, Roboto, Arial, sans-serif;
      color: var(--text-primary);
      background: var(--bg-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    #app {
      height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
      z-index: 100;
    }

    .nav-btn {
      width: 50px;
      height: 50px;
      background: transparent;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .nav-btn:hover {
      transform: translateY(-2px);
    }

    .nav-btn img {
      width: 40px;
      height: 40px;
      transition: transform 0.3s ease;
    }

    .nav-btn:hover img {
      transform: scale(1.1);
    }

    .logo {
      text-align: center;
    }

    .logo h1 {
      font-size: 20px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 2px;
    }

    .developer {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .main-menu-btn {
      padding: 10px 16px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      font-weight: 600;
      text-decoration: none;
    }

    .main-menu-btn:hover {
      background: var(--bg-primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-dark);
    }

    .inventory {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      padding: 0;
    }

    .inv-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      border-bottom: 1px solid var(--border-color);
      background: var(--bg-secondary);
    }

    .inv-header h2 {
      font-size: 24px;
      font-weight: 800;
      color: var(--text-primary);
    }

    .inv-controls {
      display: flex;
      gap: 16px;
      align-items: center;
    }

    .filter-btn {
      padding: 8px 16px;
      background: linear-gradient(135deg, #1a365d, #2d3748);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 600;
      box-shadow: var(--shadow-dark);
    }

    .filter-btn:hover {
      background: linear-gradient(135deg, #2d3748, #4a5568);
      transform: translateY(-2px);
    }

    .close-btn {
      width: 32px;
      height: 32px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 50%;
      color: var(--text-primary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      transition: all 0.2s ease;
    }

    .close-btn:hover {
      background: var(--accent-gold);
      color: #000;
      transform: rotate(90deg);
    }

    .filter-panel {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      padding: 20px;
      border-bottom: 1px solid var(--border-color);
      border-top: 2px solid var(--accent-gold);
      box-shadow: var(--shadow-dark);
    }

    .filter-group {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .filter-group:last-child {
      margin-bottom: 0;
    }

    .filter-group label {
      color: var(--text-primary);
      font-weight: 600;
      min-width: 100px;
      font-size: 14px;
    }

    select {
      background: linear-gradient(135deg, #1a365d, #2d3748);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      padding: 8px 12px;
      font-size: 14px;
      box-shadow: var(--shadow-dark);
    }

    select:focus {
      outline: none;
      border-color: var(--accent-gold);
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
    }

    .toggle-switch input {
      display: none;
    }

    .toggle-switch label {
      display: flex;
      align-items: center;
      background: linear-gradient(135deg, #1a365d, #2d3748);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 4px;
      cursor: pointer;
      position: relative;
      width: 120px;
      height: 32px;
      box-shadow: var(--shadow-dark);
    }

    .toggle-switch label::before {
      content: '';
      position: absolute;
      left: 4px;
      top: 4px;
      width: 56px;
      height: 24px;
      background: var(--accent-gold);
      border-radius: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .toggle-switch input:checked + label::before {
      transform: translateX(56px);
    }

    .toggle-label {
      flex: 1;
      text-align: center;
      font-size: 12px;
      font-weight: 600;
      z-index: 1;
      transition: color 0.3s ease;
    }

    .toggle-switch input:checked + label .toggle-label:first-child,
    .toggle-switch input:not(:checked) + label .toggle-label:last-child {
      color: #000;
    }

    .cards-grid {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 16px;
      overflow-y: auto;
      padding: 16px;
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--radius-md);
      padding: 12px;
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      min-height: 200px;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-dark);
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.5);
      border-color: var(--accent-gold);
    }

    .card img {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-radius: var(--radius-sm);
      margin-bottom: 8px;
      background: var(--bg-secondary);
    }

    .card.closed img {
      filter: brightness(0.3) blur(2px);
    }

    .card.closed::before {
      content: "?";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 32px;
      font-weight: 800;
      color: var(--text-primary);
      z-index: 2;
    }

    .card-name {
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 4px;
      text-align: center;
    }

    .card-meta {
      font-size: 12px;
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: 8px;
    }

    .rarity-strip {
      height: 6px;
      border-radius: 3px;
      margin-top: auto;
    }

    .rarity-Обычные { background: var(--rarity-common); }
    .rarity-Редкие { background: var(--rarity-rare); }
    .rarity-Эпические { background: var(--rarity-epic); }
    .rarity-Легендарные { background: var(--rarity-legend); }
    .rarity-Мифические { background: var(--rarity-mythic); }
    .rarity-Секретные { background: var(--rarity-secret); }

    .inv-footer {
      padding: 16px;
      border-top: 1px solid var(--border-color);
      background: var(--bg-secondary);
    }

    .inv-count {
      text-align: center;
      color: var(--text-secondary);
      font-size: 14px;
    }

    .card-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--bg-modal);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow: hidden;
    }

    .card-modal-content {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 24px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-dark);
      overflow-x: hidden;
    }

    .card-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      align-items: start;
    }

    .card-image img {
      width: 100%;
      height: auto;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-dark);
    }

    .card-info h3 {
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 12px;
      color: var(--text-primary);
    }

    .rarity-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      margin-top: 8px;
    }

    .card-description {
      font-size: 14px;
      line-height: 1.6;
      color: var(--text-secondary);
    }

    .info-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--bg-modal);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow: hidden;
    }

    .info-modal-content {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 30px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      box-shadow: var(--shadow-dark);
    }

    .modal-title {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 20px;
      color: var(--text-primary);
      text-align: center;
    }

    .modal-text {
      font-size: 16px;
      line-height: 1.6;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }

    .modal-link {
      color: #ff7a00;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .modal-link:hover {
      color: var(--accent-gold);
      text-decoration: underline;
    }

    .team-section {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
    }

    .team-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--text-primary);
    }

    .team-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }

    .team-item {
      background: var(--bg-secondary);
      padding: 15px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
    }

    .team-role {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 5px;
    }

    .team-name {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .disclaimer {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255, 122, 0, 0.1);
      border-radius: var(--radius-md);
      border-left: 4px solid #ff7a00;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .chances-section {
      margin: 20px 0;
      padding: 20px;
      background: linear-gradient(135deg, #0f172a, #1e293b);
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
    }

    .chances-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--text-primary);
      text-align: center;
    }

    .chances-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
    }

    .chance-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      background: var(--bg-secondary);
      border-radius: var(--radius-sm);
      border: 1px solid var(--border-color);
    }

    .chance-color {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.3);
    }

    .chance-text {
      font-size: 14px;
      color: var(--text-primary);
      font-weight: 600;
    }

    .hidden {
      display: none !important;
    }

    audio {
      position: absolute;
      left: -9999px;
      opacity: 0;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .card-details {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      
      .cards-grid {
        grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
      }
      
      .team-grid {
        grid-template-columns: 1fr;
      }
      
      .chances-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .topbar {
        padding: 8px 12px;
      }
      
      .logo h1 {
        font-size: 18px;
      }
      
      .inv-controls {
        gap: 12px;
      }
      
      .filter-btn {
        margin-right: 4px;
      }
      
      .info-modal-content {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <header class="topbar">
      <button class="nav-btn" id="backBtn">
        <img src="images/back.png" alt="Назад" />
      </button>
      
      <div class="logo">
        <h1>КОЛЛЕКЦИЯ</h1>
        <div class="developer">Собери Политиков</div>
      </div>
      
      <div style="display: flex; gap: 10px;">
        <button class="nav-btn" id="infoBtn">
          <img src="images/info.png" alt="Информация" />
        </button>
        <button class="nav-btn" id="settingsBtn">
          <img src="images/setting.png" alt="Настройки" />
        </button>
      </div>
    </header>

    <section class="inventory">
      <div class="inv-header">
        <h2>МОЯ КОЛЛЕКЦИЯ</h2>
        <div class="inv-controls">
          <button class="filter-btn" id="filterBtn">ФИЛЬТРЫ</button>
        </div>
      </div>
      
      <div id="filterPanel" class="filter-panel hidden">
        <div class="filter-group">
          <label>Сортировка:</label>
          <select id="sortBy">
            <option value="rarity-desc">По редкости (убыв.)</option>
            <option value="rarity-asc">По редкости (возр.)</option>
            <option value="name-asc">По имени (А-Я)</option>
            <option value="name-desc">По имени (Я-А)</option>
            <option value="country-asc">По стране (А-Я)</option>
            <option value="country-desc">По стране (Я-А)</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Показывать:</label>
          <div class="toggle-switch">
            <input type="checkbox" id="showAllCards" />
            <label for="showAllCards">
              <span class="toggle-label">Мои</span>
              <span class="toggle-label">Все</span>
            </label>
          </div>
        </div>
      </div>
      
      <div id="cardsGrid" class="cards-grid"></div>
      
      <div class="inv-footer">
        <div id="invCount" class="inv-count">Карт: 0/84</div>
      </div>
    </section>

    <div id="card-modal" class="card-modal hidden">
      <div class="card-modal-content">
        <button class="close-btn" id="closeCard">✕</button>
        <div class="card-details">
          <div class="card-image">
            <img id="detailCardImg" alt="Карта" />
          </div>
          <div class="card-info">
            <h3 id="detailCardName"></h3>
            <div class="card-meta">
              <div id="detailCardTitle"></div>
              <div id="detailCardCountry"></div>
              <div id="detailCardRarity" class="rarity-badge"></div>
            </div>
            <div class="card-description" id="detailCardDescription"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="info-modal" class="info-modal hidden">
      <div class="info-modal-content">
        <button class="close-btn" id="closeInfo">✕</button>
        <h2 class="modal-title">Собери Политиков</h2>
        
        <div class="chances-section">
          <h3 class="chances-title">Шансы получения карт</h3>
          <div class="chances-grid">
            <div class="chance-item">
              <div class="chance-color" style="background: var(--rarity-common);"></div>
              <div class="chance-text">Обычные: 40%</div>
            </div>
            <div class="chance-item">
              <div class="chance-color" style="background: var(--rarity-rare);"></div>
              <div class="chance-text">Редкие: 30%</div>
            </div>
            <div class="chance-item">
              <div class="chance-color" style="background: var(--rarity-epic);"></div>
              <div class="chance-text">Эпические: 15%</div>
            </div>
            <div class="chance-item">
              <div class="chance-color" style="background: var(--rarity-legend);"></div>
              <div class="chance-text">Легендарные: 8%</div>
            </div>
            <div class="chance-item">
              <div class="chance-color" style="background: var(--rarity-mythic);"></div>
              <div class="chance-text">Мифические: 5%</div>
            </div>
            <div class="chance-item">
              <div class="chance-color" style="background: var(--rarity-secret);"></div>
              <div class="chance-text">Секретные: 2%</div>
            </div>
          </div>
        </div>
        
        <p class="modal-text">
          Собери Политиков - уникальная аркадная веб-игра, где с помощью разных мини игр вам придётся собрать всю коллекцию европейских правителей 21-века
        </p>
        <p class="modal-text">
          Разработчики являются членами электронного государства 
          <a href="https://t.me/Politiki_World" class="modal-link" target="_blank">"Госдума"</a>
        </p>
        
        <div class="team-section">
          <h3 class="team-title">Команда разработки</h3>
          <div class="team-grid">
            <div class="team-item">
              <div class="team-role">Идея:</div>
              <div class="team-name">Экс-Донни<br>Владимир Путин</div>
            </div>
            <div class="team-item">
              <div class="team-role">Код:</div>
              <div class="team-name">Владимир Путин</div>
            </div>
            <div class="team-item">
              <div class="team-role">Тестировщики:</div>
              <div class="team-name">Евгений Пригожин<br>Михаил Мишустин<br>Экс-Донни</div>
            </div>
            <div class="team-item">
              <div class="team-role">Функциональный Помощник:</div>
              <div class="team-name">Евгений Пригожин</div>
            </div>
          </div>
        </div>
        
        <div class="disclaimer">
          Игра не хочет кого либо оскорбить или унизить, информация взята из открытых источников, а все пасхалки являются юмористическими
        </div>
      </div>
    </div>

    <audio id="bg-music" loop preload="auto">
      <source src="music/fon1.mp3" type="audio/mpeg">
    </audio>
    <audio id="click-sound" src="sound/clicking.mp3" preload="auto"></audio>
  </div>

  <script>
    (() => {
      const ALL_CARDS = [
        {"name":"Ханс-Адам II","title":"Князь","country":"Лихтенштейн","rarity":"Обычные","image":"images/cart/hans_adam.png","description":"Правящий князь Лихтенштейна с 1989 года."},
        {"name":"Даниэль Риш","title":"Премьер-министр","country":"Лихтенштейн","rarity":"Обычные","image":"images/cart/daniel_rish.png","description":"Глава правительства Лихтенштейна с 2021 года."},
        {"name":"Гвюдни Йоуханнессон","title":"Президент","country":"Исландия","rarity":"Обычные","image":"images/cart/gudni_johannesson.png","description":"Президент Исландии с 2016 года."},
        {"name":"Катрин Якобсдоуттир","title":"Премьер-министр","country":"Исландия","rarity":"Обычные","image":"images/cart/katrin_jakobsdottir.png","description":"Премьер-министр Исландии с 2017 года."},
        {"name":"Джордж Велла","title":"Президент","country":"Мальта","rarity":"Обычные","image":"images/cart/george_vella.png","description":"Президент Мальты с 2019 года."},
        {"name":"Роберт Абела","title":"Премьер-министр","country":"Мальта","rarity":"Обычные","image":"images/cart/robert_abela.png","description":"Премьер-министр Мальты с 2020 года."},
        {"name":"Альбер II","title":"Князь","country":"Монако","rarity":"Обычные","image":"images/cart/albert_ii.png","description":"Правящий князь Монако с 2005 года."},
        {"name":"Пьер Дарту","title":"Государственный министр","country":"Монако","rarity":"Обычные","image":"images/cart/pierre_dartout.png","description":"Государственный министр Монако с 2020 года."},
        {"name":"Александр Ван дер Беллен","title":"Президент","country":"Австрия","rarity":"Обычные","image":"images/cart/alexander_van_der_bellen.png","description":"Федеральный президент Австрии с 2017 года."},
        {"name":"Карл Нехаммер","title":"Канцлер","country":"Австрия","rarity":"Обычные","image":"images/cart/karl_nehammer.png","description":"Федеральный канцлер Австрии с 2021 года."},
        {"name":"Байрам Бегай","title":"Президент","country":"Албания","rarity":"Обычные","image":"images/cart/bajram_begaj.png","description":"Президент Албании с 2022 года."},
        {"name":"Эди Рама","title":"Премьер-министр","country":"Албания","rarity":"Обычные","image":"images/cart/edi_rama.png","description":"Премьер-министр Албании с 2013 года."},
        {"name":"Румен Радев","title":"Президент","country":"Болгария","rarity":"Обычные","image":"images/cart/rumen_radev.png","description":"Президент Болгарии с 2017 года."},
        {"name":"Димитр Главчев","title":"Премьер-министр","country":"Болгария","rarity":"Обычные","image":"images/cart/dimitar_glavchev.png","description":"Премьер-министр Болгарии с 2024 года."},
        {"name":"Катерина Сакелларопулу","title":"Президент","country":"Греция","rarity":"Обычные","image":"images/cart/katerina_sakellaropoulou.png","description":"Президент Греции с 2020 года."},
        {"name":"Кириакос Мицотакис","title":"Премьер-министр","country":"Греция","rarity":"Обычные","image":"images/cart/kyriakos_mitsotakis.png","description":"Премьер-министр Греции с 2023 года."},
        {"name":"Зузана Чапутова","title":"Президент","country":"Словакия","rarity":"Обычные","image":"images/cart/zuzana_caputova.png","description":"Президент Словакии с 2019 года."},
        {"name":"Роберт Фицо","title":"Премьер-министр","country":"Словакия","rarity":"Обычные","image":"images/cart/robert_fico.png","description":"Премьер-министр Словакии с 2023 года."},
        {"name":"Наташа Пирц Мусар","title":"Президент","country":"Словения","rarity":"Обычные","image":"images/cart/natasa_pirc_musar.png","description":"Президент Словении с 2022 года."},
        {"name":"Роберт Голоб","title":"Премьер-министр","country":"Словения","rarity":"Обычные","image":"images/cart/robert_golob.png","description":"Премьер-министр Словении с 2022 года."},
        {"name":"Клаус Йоханнис","title":"Президент","country":"Румыния","rarity":"Обычные","image":"images/cart/klaus_iohannis.png","description":"Президент Румынии с 2014 года."},
        {"name":"Марчел Чолаку","title":"Премьер-министр","country":"Румыния","rarity":"Обычные","image":"images/cart/marcel_ciolacu.png","description":"Премьер-министр Румынии с 2023 года."},
        {"name":"Эдгарс Ринкевичс","title":"Президент","country":"Латвия","rarity":"Обычные","image":"images/cart/edgars_rinkevics.png","description":"Президент Латвии с 2023 года."},
        {"name":"Эвика Силиня","title":"Премьер-министр","country":"Латвия","rarity":"Обычные","image":"images/cart/evika_silina.png","description":"Премьер-министр Латвии с 2023 года."},
        {"name":"Гитанас Науседа","title":"Президент","country":"Литва","rarity":"Обычные","image":"images/cart/gitanas_nauseda.png","description":"Президент Литвы с 2019 года."},
        {"name":"Ингрида Шимоните","title":"Премьер-министр","country":"Литва","rarity":"Обычные","image":"images/cart/ingrida_simonyte.png","description":"Премьер-министр Литвы с 2020 года."},
        {"name":"Алар Карис","title":"Президент","country":"Эстония","rarity":"Обычные","image":"images/cart/alar_karis.png","description":"Президент Эстонии с 2021 года."},
        {"name":"Кая Каллас","title":"Премьер-министр","country":"Эстония","rarity":"Обычные","image":"images/cart/kaja_kallas.png","description":"Премьер-министр Эстонии с 2021 года."},
        {"name":"Майкл Д. Хиггинс","title":"Президент","country":"Ирландия","rarity":"Обычные","image":"images/cart/michael_higgins.png","description":"Президент Ирландии с 2011 года."},
        {"name":"Лео Варадкар","title":"Тайшич","country":"Ирландия","rarity":"Обычные","image":"images/cart/leo_varadkar.png","description":"Премьер-министр Ирландии."},
        {"name":"Саули Нийнистё","title":"Президент","country":"Финляндия","rarity":"Редкие","image":"images/cart/sauli_niinisto.png","description":"Президент Финляндии с 2012 года."},
        {"name":"Петтери Орпо","title":"Премьер-министр","country":"Финляндия","rarity":"Редкие","image":"images/cart/petteri_orpo.png","description":"Премьер-министр Финляндии с 2023 года."},
        {"name":"Владимир Зеленский","title":"Президент","country":"Украина","rarity":"Редкие","image":"images/cart/volodymyr_zelensky.png","description":"Президент Украины с 2019 года."},
        {"name":"Денис Шмыгаль","title":"Премьер-министр","country":"Украина","rarity":"Редкие","image":"images/cart/denys_shmyhal.png","description":"Премьер-министр Украины с 2020 года."},
        {"name":"Фелипе VI","title":"Король","country":"Испания","rarity":"Редкие","image":"images/cart/felipe_vi.png","description":"Король Испании с 2014 года."},
        {"name":"Педро Санчес","title":"Премьер-министр","country":"Испания","rarity":"Редкие","image":"images/cart/pedro_sanchez.png","description":"Премьер-министр Испании с 2018 года."},
        {"name":"Виллем-Александр","title":"Король","country":"Нидерланды","rarity":"Редкие","image":"images/cart/willem_alexander.png","description":"Король Нидерландов с 2013 года."},
        {"name":"Марк Рютте","title":"Премьер-министр","country":"Нидерланды","rarity":"Редкие","image":"images/cart/mark_rutte.png","description":"Премьер-министр Нидерландов с 2010 года."},
        {"name":"Маргрете II","title":"Королева","country":"Дания","rarity":"Редкие","image":"images/cart/margrethe_ii.png","description":"Королева Дании с 1972 года."},
        {"name":"Метте Фредериксен","title":"Премьер-министр","country":"Дания","rarity":"Редкие","image":"images/cart/mette_frederiksen.png","description":"Премьер-министр Дании с 2019 года."},
        {"name":"Карл XVI Густав","title":"Король","country":"Швеция","rarity":"Редкие","image":"images/cart/carl_xvi_gustaf.png","description":"Король Швеции с 1973 года."},
        {"name":"Ульф Кристерссон","title":"Премьер-министр","country":"Швеция","rarity":"Редкие","image":"images/cart/ulf_kristersson.png","description":"Премьер-министр Швеции с 2022 года."},
        {"name":"Харальд V","title":"Король","country":"Норвегия","rarity":"Редкие","image":"images/cart/harald_v.png","description":"Король Норвегии с 1991 года."},
        {"name":"Йонас Гар Стёре","title":"Премьер-министр","country":"Норвегия","rarity":"Редкие","image":"images/cart/jonas_gahr_store.png","description":"Премьер-министр Норвегии с 2021 года."},
        {"name":"Филипп","title":"Король","country":"Бельгия","rarity":"Редкие","image":"images/cart/philippe.png","description":"Король Бельгии с 2013 года."},
        {"name":"Александр Де Кроо","title":"Премьер-министр","country":"Бельгия","rarity":"Редкие","image":"images/cart/alexander_de_croo.png","description":"Премьер-министр Бельгии с 2020 года."},
        {"name":"Анри","title":"Великий герцог","country":"Люксембург","rarity":"Редкие","image":"images/cart/henri.png","description":"Великий герцог Люксембурга с 2000 года."},
        {"name":"Ксавье Беттель","title":"Премьер-министр","country":"Люксембург","rarity":"Редкие","image":"images/cart/xavier_bettel.png","description":"Премьер-министр Люксембурга с 2013 года."},
        {"name":"Яков Милатович","title":"Президент","country":"Черногория","rarity":"Редкие","image":"images/cart/jakov_milatovic.png","description":"Президент Черногории с 2023 года."},
        {"name":"Милойко Спаич","title":"Премьер-министр","country":"Черногория","rarity":"Редкие","image":"images/cart/milojko_spajic.png","description":"Премьер-министр Черногории с 2023 года."},
        {"name":"Карл III","title":"Король","country":"Великобритания","rarity":"Эпические","image":"images/cart/charles_iii.png","description":"Король Великобритании с 2022 года."},
        {"name":"Кир Стармер","title":"Премьер-министр","country":"Великобритания","rarity":"Эпические","image":"images/cart/keir_starmer.png","description":"Премьер-министр Великобритании с 2024 года."},
        {"name":"Тамаш Суйок","title":"Президент","country":"Венгрия","rarity":"Эпические","image":"images/cart/tamas_sulyok.png","description":"Президент Венгрии с 2024 года."},
        {"name":"Виктор Орбан","title":"Премьер-министр","country":"Венгрия","rarity":"Эпические","image":"images/cart/viktor_orban.png","description":"Премьер-министр Венгрии с 2010 года."},
        {"name":"Франк-Вальтер Штайнмайер","title":"Президент","country":"Германия","rarity":"Эпические","image":"images/cart/frank_walter_steinmeier.png","description":"Федеральный президент Германии с 2017 года."},
        {"name":"Фридрих Мерц","title":"Канцлер","country":"Германия","rarity":"Эпические","image":"images/cart/friedrich_merz.png","description":"Канцлер Германии."},
        {"name":"Серджо Маттарелла","title":"Президент","country":"Италия","rarity":"Эпические","image":"images/cart/sergio_mattarella.png","description":"Президент Италии с 2015 года."},
        {"name":"Джорджа Мелони","title":"Премьер-министр","country":"Италия","rarity":"Эпические","image":"images/cart/giorgia_meloni.png","description":"Премьер-министр Италии с 2022 года."},
        {"name":"Зоран Миланович","title":"Президент","country":"Хорватия","rarity":"Эпические","image":"images/cart/zoran_milanovic.png","description":"Президент Хорватии с 2020 года."},
        {"name":"Андрей Пленкович","title":"Премьер-министр","country":"Хорватия","rarity":"Эпические","image":"images/cart/andrej_plenkovic.png","description":"Премьер-министр Хорватии с 2016 года."},
        {"name":"Марселу Ребелу ди Соза","title":"Президент","country":"Португалия","rarity":"Эпические","image":"images/cart/marcelo_rebelo_de_sousa.png","description":"Президент Португалии с 2016 года."},
        {"name":"Антониу Кошта","title":"Премьер-министр","country":"Португалия","rarity":"Эпические","image":"images/cart/antonio_costa.png","description":"Премьер-министр Португалии с 2015 года."},
        {"name":"Майя Санду","title":"Президент","country":"Молдова","rarity":"Эпические","image":"images/cart/maia_sandu.png","description":"Президент Молдовы с 2020 года."},
        {"name":"Дорин Речан","title":"Премьер-министр","country":"Молдова","rarity":"Эпические","image":"images/cart/dorin_recean.png","description":"Премьер-министр Молдовы с 2023 года."},
        {"name":"Кароль Навроцкий","title":"Президент","country":"Польша","rarity":"Эпические","image":"images/cart/karol_nawrocki.png","description":"Президент Польши."},
        {"name":"Дональд Туск","title":"Премьер-министр","country":"Польша","rarity":"Эпические","image":"images/cart/donald_tusk.png","description":"Премьер-министр Польши с 2023 года."},
        {"name":"Петр Павел","title":"Президент","country":"Чехия","rarity":"Эпические","image":"images/cart/petr_pavel.png","description":"Президент Чехии с 2023 года."},
        {"name":"Петр Фиала","title":"Премьер-министр","country":"Чехия","rarity":"Эпические","image":"images/cart/petr_fiala.png","description":"Премьер-министр Чехии с 2021 года."},
        {"name":"Папа Франциск","title":"Папа Римский","country":"Ватикан","rarity":"Легендарные","image":"images/cart/pope_francis.png","description":"266-й Папа Римский с 2013 года."},
        {"name":"Пьетро Паролин","title":"Государственный секретарь","country":"Ватикан","rarity":"Легендарные","image":"images/cart/pietro_parolin.png","description":"Государственный секретарь Ватикана с 2013 года."},
        {"name":"Жоан Энрик Вивес-и-Сисилья","title":"Соправитель","country":"Андорра","rarity":"Легендарные","image":"images/cart/joan_enric_vives.png","description":"Соправитель Андорры как Епископ Урхельский."},
        {"name":"Ксавье Эспот Самора","title":"Премьер-министр","country":"Андорра","rarity":"Легендарные","image":"images/cart/xavier_espot_zamora.png","description":"Глава правительства Андорры с 2019 года."},
        {"name":"Алессандро Скарано","title":"Капитан-регент","country":"Сан-Марино","rarity":"Легендарные","image":"images/cart/alessandro_scarano.png","description":"Капитан-регент Сан-Марино."},
        {"name":"Аделе Тоннини","title":"Капитан-регент","country":"Сан-Марино","rarity":"Легендарные","image":"images/cart/adele_tonnini.png","description":"Капитан-регент Сан-Марино."},
        {"name":"Федеральный совет","title":"Коллегиальное правление","country":"Швейцария","rarity":"Легендарные","image":"images/cart/federal_council.png","description":"Коллективный глава государства Швейцарии."},
        {"name":"Эмманюэль Макрон","title":"Президент","country":"Франция","rarity":"Легендарные","image":"images/cart/emmanuel_macron.png","description":"Президент Франции с 2017 года. Так же соправитель Андорры"},
        {"name":"Габриэль Атталь","title":"Премьер-министр","country":"Франция","rarity":"Легендарные","image":"images/cart/gabriel_attal.png","description":"Премьер-министр Франции с 2024 года."},
        {"name":"Михаил Мишустин","title":"Председатель правительства","country":"Россия","rarity":"Мифические","image":"images/cart/mikhail_mishustin.png","description":"Председатель Правительства России с 2020 года."},
        {"name":"Дональд Трамп","title":"Президент","country":"США","rarity":"Мифические","image":"images/cart/donald_trump.png","description":"45-й президент США (2017-2021)."},
        {"name":"Джей Ди Вэнс","title":"Вице-президент","country":"США","rarity":"Мифические","image":"images/cart/jd_vance.png","description":"Вице-президент США."},
        {"name":"Александр Вучич","title":"Президент","country":"Сербия","rarity":"Мифические","image":"images/cart/aleksandar_vucic.png","description":"Президент Сербии с 2017 года."},
        {"name":"Ана Брнабич","title":"Премьер-министр","country":"Сербия","rarity":"Мифические","image":"images/cart/ana_brnabic.png","description":"Премьер-министр Сербии с 2017 года."},
        {"name":"Роман Головченко","title":"Премьер-министр","country":"Беларусь","rarity":"Мифические","image":"images/cart/roman_golovchenko.png","description":"Премьер-министр Беларуси с 2020 года."},
        {"name":"Чарльз Джеймс Кирк","title":"Секретный персонаж","country":"США","rarity":"Секретные","image":"images/cart/charles_kirk.png","description":"Основатель Turning Point USA."},
        {"name":"Евгений Пригожин","title":"Секретный персонаж","country":"Россия","rarity":"Секретные","image":"images/cart/evgeny_prigozhin.png","description":"Основатель ЧВК 'Вагнер'."},
        {"name":"Владимир Жириновский","title":"Секретный персонаж","country":"Россия","rarity":"Секретные","image":"images/cart/vladimir_zhirinovsky.png","description":"Основатель и лидер ЛДПР."},
        {"name":"Владимир Путин","title":"Секретный персонаж","country":"Россия","rarity":"Секретные","image":"images/cart/vladimir_putin.png","description":"Президент России."},
        {"name":"Олаф Шольц","title":"Секретный персонаж","country":"Германия","rarity":"Секретные","image":"images/cart/olaf_scholz.png","description":"Федеральный канцлер Германии (2021-2025)."},
        {"name":"Александр Лукашенко","title":"Секретный персонаж","country":"Беларусь","rarity":"Секретные","image":"images/cart/alexander_lukashenko.png","description":"Президент Беларуси с 1994 года."},
        {"name":"Виктор Хренин","title":"Секретный персонаж","country":"Беларусь","rarity":"Секретные","image":"images/cart/viktor_khrenin.png","description":"Министр обороны Беларуси."},
        {"name":"Анджей Дуда","title":"Секретный персонаж","country":"Польша","rarity":"Секретные","image":"images/cart/andzej_duda.png","description":"Президент Польши с 2015 года."}
      ];

      const $ = id => document.getElementById(id);

      let CARDS = [];

      function playSound(sound) {
        if (!sound || !sound.play) return;
        try {
          sound.currentTime = 0;
          sound.play().catch(() => {});
        } catch (error) {
          console.log('Ошибка воспроизведения звука');
        }
      }

      function initMusic() {
        const bgMusic = $('bg-music');
        if (!bgMusic) return;
        
        try {
          const mv = localStorage.getItem('musicVol');
          bgMusic.volume = mv !== null ? Number(mv) : 0.12;
          
          document.addEventListener('click', () => {
            if (bgMusic.paused) {
              bgMusic.play().catch(() => {});
            }
          }, { once: true });
        } catch (error) {
          console.log('Ошибка инициализации музыки');
        }
      }

      function loadPlayerCards() {
        try {
          const saved = localStorage.getItem('playerCards');
          CARDS = saved ? JSON.parse(saved) : [];
        } catch (e) {
          CARDS = [];
        }
      }

      function savePlayerCards() {
        localStorage.setItem('playerCards', JSON.stringify(CARDS));
      }

      function renderCards() {
        const cardsGrid = $('cardsGrid');
        const invCount = $('invCount');
        if (!cardsGrid) return;

        const showAll = $('showAllCards') ? $('showAllCards').checked : false;
        const sortValue = $('sortBy') ? $('sortBy').value : 'rarity-desc';

        cardsGrid.innerHTML = '';

        let sortedCards = [...ALL_CARDS];

        switch (sortValue) {
          case 'rarity-desc':
            sortedCards.sort((a, b) => {
              const rarityOrder = ['Секретные', 'Мифические', 'Легендарные', 'Эпические', 'Редкие', 'Обычные'];
              return rarityOrder.indexOf(a.rarity) - rarityOrder.indexOf(b.rarity);
            });
            break;
          case 'rarity-asc':
            sortedCards.sort((a, b) => {
              const rarityOrder = ['Секретные', 'Мифические', 'Легендарные', 'Эпические', 'Редкие', 'Обычные'];
              return rarityOrder.indexOf(b.rarity) - rarityOrder.indexOf(a.rarity);
            });
            break;
          case 'name-asc':
            sortedCards.sort((a, b) => a.name.localeCompare(b.name));
            break;
          case 'name-desc':
            sortedCards.sort((a, b) => b.name.localeCompare(a.name));
            break;
          case 'country-asc':
            sortedCards.sort((a, b) => a.country.localeCompare(b.country));
            break;
          case 'country-desc':
            sortedCards.sort((a, b) => b.country.localeCompare(a.country));
            break;
        }

        sortedCards.forEach(card => {
          const playerCard = CARDS.find(pc =>
            pc.name === card.name && pc.country === card.country
          );
          const isUnlocked = !!playerCard;

          if (!showAll && !isUnlocked) return;

          const cardElement = document.createElement('div');
          cardElement.className = `card ${isUnlocked ? '' : 'closed'}`;

          const img = document.createElement('img');
          if (isUnlocked) {
            img.src = card.image || 'images/foto.png';
            img.onerror = function() {
              this.src = 'images/foto.png';
              this.onerror = null;
            };
          } else {
            img.src = 'images/foto.png';
            img.style.filter = 'brightness(0.3) blur(2px)';
          }

          const name = document.createElement('div');
          name.className = 'card-name';
          name.textContent = isUnlocked ? card.name : '???';

          const meta = document.createElement('div');
          meta.className = 'card-meta';
          meta.textContent = isUnlocked ? `${card.title} — ${card.country}` : 'Неизвестно';

          const strip = document.createElement('div');
          strip.className = `rarity-strip rarity-${card.rarity}`;

          cardElement.appendChild(img);
          cardElement.appendChild(name);
          cardElement.appendChild(meta);
          cardElement.appendChild(strip);

          if (isUnlocked) {
            cardElement.addEventListener('click', () => {
              playSound($('click-sound'));
              showCardDetails(card);
            });
          }

          cardsGrid.appendChild(cardElement);
        });

        if (invCount) invCount.textContent = `Карт: ${CARDS.length}/${ALL_CARDS.length}`;
      }

      function showCardDetails(card) {
        const img = $('detailCardImg');
        const name = $('detailCardName');
        const title = $('detailCardTitle');
        const country = $('detailCardCountry');
        const rarity = $('detailCardRarity');
        const description = $('detailCardDescription');
        const cardModal = $('card-modal');

        if (img) {
          img.src = card.image || 'images/foto.png';
          img.onerror = function() {
            this.src = 'images/foto.png';
            this.onerror = null;
          };
        }
        if (name) name.textContent = card.name;
        if (title) title.textContent = card.title;
        if (country) country.textContent = card.country;
        if (rarity) {
          rarity.textContent = card.rarity;
          rarity.className = `rarity-badge rarity-${card.rarity}`;
        }
        if (description) description.textContent = card.description || 'Описание отсутствует';

        if (cardModal) cardModal.classList.remove('hidden');
      }

      function closeCardModal() {
        const cardModal = $('card-modal');
        if (cardModal) cardModal.classList.add('hidden');
      }

      function showInfoModal() {
        const infoModal = $('info-modal');
        if (infoModal) infoModal.classList.remove('hidden');
      }

      function closeInfoModal() {
        const infoModal = $('info-modal');
        if (infoModal) infoModal.classList.add('hidden');
      }

      function openSettings() {
        const existing = document.getElementById('settings-panel');
        if (existing) {
          existing.classList.toggle('hidden');
          return;
        }

        const panel = document.createElement('div');
        panel.id = 'settings-panel';
        panel.style.cssText = `
          position: fixed;
          right: 20px;
          top: 80px;
          width: 320px;
          z-index: 9999;
          border-radius: 12px;
          background: var(--bg-card);
          padding: 20px;
          box-shadow: var(--shadow-dark);
          border: 1px solid var(--border-color);
          color: var(--text-primary);
        `;

        panel.innerHTML = `
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <strong>Настройки</strong>
            <button id="closeSettings" class="close-btn">✕</button>
          </div>
          <div style="display: flex; flex-direction: column; gap: 16px;">
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600;">Громкость музыки</label>
              <input id="musicRange" type="range" min="0" max="1" step="0.01" value="0.12"
                     style="width: 100%;">
            </div>
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600;">Громкость эффектов</label>
              <input id="sfxRange" type="range" min="0" max="1" step="0.01" value="1"
                     style="width: 100%;">
            </div>
            <button id="resetProgress" style="padding: 12px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: var(--radius-md); color: var(--text-primary); cursor: pointer;">Сбросить прогресс</button>
          </div>
        `;

        document.body.appendChild(panel);

        $('closeSettings').addEventListener('click', () => {
          playSound($('click-sound'));
          panel.remove();
        });

        const musicRange = $('musicRange');
        const sfxRange = $('sfxRange');
        const resetProgress = $('resetProgress');
        const bgMusic = $('bg-music');
        const clickSound = $('click-sound');

        if (bgMusic) {
          const mv = localStorage.getItem('musicVol');
          if (mv !== null) {
            bgMusic.volume = Number(mv);
            musicRange.value = mv;
          }
        }

        if (clickSound) {
          const sv = localStorage.getItem('sfxVol');
          if (sv !== null) {
            clickSound.volume = Number(sv);
            sfxRange.value = sv;
          }
        }

        musicRange.addEventListener('input', (e) => {
          const v = Number(e.target.value);
          if (bgMusic) bgMusic.volume = v;
          localStorage.setItem('musicVol', String(v));
        });

        sfxRange.addEventListener('input', (e) => {
          const v = Number(e.target.value);
          if (clickSound) clickSound.volume = v;
          localStorage.setItem('sfxVol', String(v));
        });

        resetProgress.addEventListener('click', () => {
          playSound($('click-sound'));
          if (confirm('Вы уверены, что хотите сбросить весь прогресс? Все карты будут удалены.')) {
            CARDS = [];
            savePlayerCards();
            renderCards();
            panel.remove();
          }
        });
      }

      function goBack() {
        const referrer = document.referrer;
        if (referrer && referrer.includes(window.location.origin)) {
          window.history.back();
        } else {
          window.location.href = 'menu.html';
        }
      }

      function init() {
        loadPlayerCards();
        renderCards();
        initMusic();

        const clickSound = $('click-sound');
        if (clickSound) {
          const sv = localStorage.getItem('sfxVol');
          if (sv !== null) {
            clickSound.volume = Number(sv);
          }
        }

        $('backBtn').addEventListener('click', () => {
          playSound(clickSound);
          goBack();
        });

        $('filterBtn').addEventListener('click', () => {
          playSound(clickSound);
          const filterPanel = $('filterPanel');
          if (filterPanel) filterPanel.classList.toggle('hidden');
        });

        $('sortBy').addEventListener('change', () => {
          playSound(clickSound);
          renderCards();
        });

        $('showAllCards').addEventListener('change', () => {
          playSound(clickSound);
          renderCards();
        });

        $('closeCard').addEventListener('click', () => {
          playSound(clickSound);
          closeCardModal();
        });

        $('infoBtn').addEventListener('click', () => {
          playSound(clickSound);
          showInfoModal();
        });

        $('closeInfo').addEventListener('click', () => {
          playSound(clickSound);
          closeInfoModal();
        });

        $('settingsBtn').addEventListener('click', () => {
          playSound(clickSound);
          openSettings();
        });

        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            const cardModal = $('card-modal');
            if (cardModal && !cardModal.classList.contains('hidden')) {
              closeCardModal();
            }
            const infoModal = $('info-modal');
            if (infoModal && !infoModal.classList.contains('hidden')) {
              closeInfoModal();
            }
          }
        });

        const infoModal = $('info-modal');
        if (infoModal) {
          infoModal.addEventListener('click', (e) => {
            if (e.target === infoModal) {
              closeInfoModal();
            }
          });
        }

        const cardModal = $('card-modal');
        if (cardModal) {
          cardModal.addEventListener('click', (e) => {
            if (e.target === cardModal) {
              closeCardModal();
            }
          });
        }
      }

      document.addEventListener('DOMContentLoaded', init);
    })();
  </script>
</body>
</html>